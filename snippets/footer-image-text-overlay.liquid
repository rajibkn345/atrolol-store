<div class="footer-image-box">
  <div class="relative footer-image-box--{{ block.settings.layout }} blocks-radius color-{{ block.settings.color_scheme }}">
    {%- liquid
      assign block_image = block.settings.image
      assign block_image_mobile = block.settings.image_mobile

      if block_image == blank
        assign image_ratio = '1/1'
      else
        assign image_ratio = block_image.aspect_ratio
      endif

      if block_image_mobile == blank
        assign image_mobile_ratio = image_ratio
      else
        assign image_mobile_ratio = block_image_mobile.aspect_ratio
      endif

      assign image_width = block.settings.image_width | append: 'px'
    -%}
    <motion-element class="block absolute inset-0 z-0" data-motion="zoom-out-sm" data-motion-delay="{{ motion_delay }}">
      <picture
        class="media-wrapper{% if block_image == blank %} bg-none{% endif %} h-full w-full"
        style="--aspect-ratio: {{ image_ratio }};{% if image_mobile_ratio %}--aspect-ratio-mobile: {{ image_mobile_ratio }};{% endif %}"
      >
        {%- if block_image != blank -%}
          {%- if block_image_mobile -%}
            <source
              media="(max-width: 767px)"
              srcset="{{ block_image_mobile | image_url: width: '400x' }} 400w, {{ block_image_mobile | image_url: width: '600x' }} 600w, {{ block_image_mobile | image_url: width: '800x' }} 800w, {{ block_image_mobile | image_url: width: '1000x' }} 1000w"
              width="{{ block_image_mobile.width }}"
              height="{{ block_image_mobile.height }}"
            >
          {%- endif -%}
          {% assign alt_image = block_image.alt | escape %}
          {{
            block_image
            | image_url: width: 1100
            | image_tag:
              loading: 'lazy',
              class: 'motion-reduce',
              sizes: image_width,
              widths: '165, 360, 535, 750, 940, 1100',
              is: 'image-lazy',
              class: 'absolute inset-0 w-full h-full',
              alt: alt_image
          }}
        {%- else -%}
          {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
        {%- endif -%}
      </picture>
    </motion-element>
    <div class="footer-image-box__content flex flex-col z-1 relative text-{{ block.settings.content_alignment }}">
      <div class="footer-image-box__details flex flex-col gap-3">
        {%- if block.settings.heading != blank -%}
          <h3 class="footer-block__heading inline-richtext {{ block.settings.heading_size }}">
            {{- block.settings.heading -}}
          </h3>
        {%- endif -%}
        {%- if block.settings.text != blank -%}
          <div class="footer-image-box__text text-base rte">
            {{ block.settings.text }}
          </div>
        {%- endif -%}
      </div>
      <div class="block">
        {%- if block.settings.button_label != blank -%}
          {% render 'button',
            button_style: block.settings.button_style,
            button_link: block.settings.button_link,
            button_label: block.settings.button_label
          %}
        {%- endif -%}
      </div>
    </div>
    <div
      class="footer-image-box__overlay bg-overlay absolute inset-0"
      style="--color-overlay-alpha: {{ block.settings.overlay_opacity }};"
    ></div>
  </div>
</div>
